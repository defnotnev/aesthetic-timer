<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ultimate School Widget</title>
<style>
  /* Reset & base */
  * {
    box-sizing: border-box;
  }
  body, html {
    margin: 0; padding: 0; height: 100%;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: var(--bg-color, #FCF1F6);
    color: var(--text-color, #4B3A52);
    overflow: hidden;
  }
  :root {
    --text-color: #FCF1F6;
    --title-color: #AD1A72;
    --outline-color: rgba(173, 26, 114, 0.2);
    --bg-color-light: #FCF1F6;
    --bg-color-dark: #2B1B34;
    --bg-image-position: center center;
    --bg-image-size: cover;
    --tab-bar-height: 50px;
    --font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }

  /* Dark theme variables */
  body.dark {
    --text-color: #FCF1F6;
    --title-color: #AD1A72;
    --outline-color: rgba(173, 26, 114, 0.3);
    --bg-color: var(--bg-color-dark);
  }

  #app {
    height: 100vh;
    width: 100vw;
    display: flex;
    flex-direction: column;
    background-color: var(--bg-color);
    background-image: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1350&q=80');
    background-position: var(--bg-image-position);
    background-size: var(--bg-image-size);
    background-repeat: no-repeat;
    transition: background-position 0.3s ease, background-size 0.3s ease;
  }

  /* Focus mode hiding tabs */
  #app.focus-mode .tab-bar,
  #app.focus-mode .tab-content > :not(.tab-active) {
    display: none;
  }
  #app.focus-mode .tab-content > .tab-active {
    flex-grow: 1;
    overflow-y: auto;
  }

  /* Tab bar */
  .tab-bar {
    display: flex;
    background: rgba(173, 26, 114, 0.2);
    height: var(--tab-bar-height);
    align-items: center;
    position: relative;
  }
  .tab-bar button {
    flex: 1;
    border: none;
    background: transparent;
    color: var(--title-color);
    font-weight: 700;
    cursor: pointer;
    font-size: 1.1rem;
    transition: background-color 0.3s ease;
  }
  .tab-bar button:hover,
  .tab-bar button.active {
    background: var(--title-color);
    color: var(--text-color);
  }

  /* Focus toggle button */
  #focus-toggle {
    position: absolute;
    left: 0.5rem;
    top: -2.5rem;
    cursor: pointer;
    font-size: 1.6rem;
    color: var(--title-color);
    background: transparent;
    border: none;
    user-select: none;
  }
  #focus-toggle:hover {
    color: #F472B6;
  }

  /* Tab content */
  .tab-content {
    flex-grow: 1;
    overflow-y: auto;
    padding: 0.8rem 1rem;
    background: rgba(255 255 255 / 0.05);
    backdrop-filter: blur(5px);
    color: var(--text-color);
  }
  .tab {
    display: none;
  }
  .tab.tab-active {
    display: block;
  }

  /* Common outline transparent rectangle with blur */
  .outline-rect {
    background: rgba(255 255 255 / 0.1);
    backdrop-filter: blur(8px);
    border: 1px solid var(--outline-color);
    border-radius: 0.5rem;
    padding: 1rem;
    margin-bottom: 1rem;
  }

  /* Scrollbar */
  ::-webkit-scrollbar {
    width: 10px;
  }
  ::-webkit-scrollbar-track {
    background: transparent;
  }
  ::-webkit-scrollbar-thumb {
    background: var(--title-color);
    border-radius: 10px;
  }

  /* Add your styles for other parts (to-do, timers, music, AI chat, games, etc.) below ... */
</style>
</head>
<body>
<div id="app">
  <button id="focus-toggle" title="Toggle Focus Mode">â›¶</button>
  <nav class="tab-bar" role="tablist" aria-label="Main tabs">
    <button class="tab-btn active" data-tab="todo" role="tab" aria-selected="true">To-Do</button>
    <button class="tab-btn" data-tab="timers" role="tab" aria-selected="false">Timers</button>
    <button class="tab-btn" data-tab="pomodoro" role="tab" aria-selected="false">Pomodoro</button>
    <button class="tab-btn" data-tab="music" role="tab" aria-selected="false">Music</button>
    <button class="tab-btn" data-tab="ai" role="tab" aria-selected="false">AI Chat</button>
    <button class="tab-btn" data-tab="games" role="tab" aria-selected="false">Games</button>
    <button class="tab-btn" data-tab="settings" role="tab" aria-selected="false">Settings</button>
  </nav>

  <main class="tab-content" role="tabpanel">
    <section id="todo" class="tab tab-active" aria-label="To-Do List">
      <!-- To-Do interface content here -->
      <div class="outline-rect">
        <!-- To-Do List UI & features with draggable tasks, hearts/stars, subtasks, etc. -->
        <!-- ... -->
      </div>
    </section>

    <section id="timers" class="tab" aria-label="Timers">
      <!-- Timer, Stopwatch, Countdown, Pomodoro interfaces -->
      <!-- ... -->
    </section>

    <section id="pomodoro" class="tab" aria-label="Pomodoro Timer">
      <!-- Pomodoro timer UI and controls -->
      <!-- ... -->
    </section>

    <section id="music" class="tab" aria-label="Music Player">
      <!-- Music Player interface, now playing bar, queue, library, upload + URL add, playlists -->
      <!-- ... -->
    </section>

    <section id="ai" class="tab" aria-label="AI Chat">
      <!-- AI chat UI with character switching and chat window -->
      <!-- ... -->
    </section>

    <section id="games" class="tab" aria-label="Mini Games">
      <!-- Mini-games tab content and game canvas -->
      <!-- ... -->
    </section>

    <section id="settings" class="tab" aria-label="Settings">
      <!-- Settings for themes, colors, dimensions, background, alarms, etc -->
      <!-- ... -->
    </section>
  </main>
</div>

<script>
  // Basic tab switching logic
  const tabs = document.querySelectorAll('.tab-btn');
  const tabContents = document.querySelectorAll('.tab');

  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      tabs.forEach(t => {
        t.classList.remove('active');
        t.setAttribute('aria-selected', 'false');
      });
      tabContents.forEach(tc => tc.classList.remove('tab-active'));
      tab.classList.add('active');
      tab.setAttribute('aria-selected', 'true');
      const tabId = tab.getAttribute('data-tab');
      document.getElementById(tabId).classList.add('tab-active');
    });
  });

  // Focus Mode Toggle
  const app = document.getElementById('app');
  const focusToggleBtn = document.getElementById('focus-toggle');
  focusToggleBtn.addEventListener('click', () => {
    app.classList.toggle('focus-mode');
  });

  // Placeholder for other JS functions: timers, to-do list, music player, AI chat, games, settings
</script>
</body>
</html>
