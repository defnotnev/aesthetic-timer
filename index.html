<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ultimate Notion Widget</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --main-color: #AD1A72;
      --bg-color: #fff;
      --tab-bg: rgba(255,255,255,0.7);
      --tab-active: var(--main-color);
      --tab-radius: 16px;
      --shadow: 0 2px 8px rgba(173,26,114,0.08);
    }
    body {
      background: var(--bg-color);
      color: var(--main-color);
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 0;
    }
    #tab-bar {
      display: flex;
      overflow-x: auto;
      background: var(--tab-bg);
      border-radius: var(--tab-radius);
      box-shadow: var(--shadow);
      margin: 16px;
      padding: 8px 0;
      gap: 8px;
    }
    .tab {
      flex: 0 0 auto;
      padding: 8px 20px;
      border-radius: var(--tab-radius);
      cursor: pointer;
      background: none;
      border: none;
      color: var(--main-color);
      font-size: 1.1em;
      transition: background 0.2s;
      outline: none;
    }
    .tab.active {
      background: var(--tab-active);
      color: #fff;
      font-weight: bold;
    }
    #widget-content {
      margin: 24px;
      padding: 24px;
      border-radius: 24px;
      background: rgba(255,255,255,0.9);
      box-shadow: var(--shadow);
      min-height: 300px;
      transition: box-shadow 0.3s;
    }
    .bubble-input {
      background: rgba(255,255,255,0.6);
      border: 1px solid var(--main-color);
      border-radius: 18px;
      padding: 10px 16px;
      margin: 8px 0;
      box-shadow: 0 1px 6px rgba(173,26,114,0.07);
      font-size: 1em;
      color: var(--main-color);
      outline: none;
      width: 100%;
    }
    .todo-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .todo-item {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
      padding: 8px;
      border-radius: 12px;
      background: rgba(255,255,255,0.7);
      box-shadow: var(--shadow);
    }
    .todo-checkbox {
      margin-right: 12px;
      accent-color: var(--main-color);
    }
    .timer-display {
      font-size: 2em;
      margin-bottom: 12px;
    }
    .music-player {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
    }
    .soundcloud-embed {
      width: 100%;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: var(--shadow);
    }
    .settings-group {
      margin-bottom: 18px;
    }
    .settings-label {
      font-weight: bold;
      margin-bottom: 6px;
      display: block;
    }
    .color-input {
      border: none;
      border-radius: 8px;
      padding: 4px;
      margin-left: 8px;
      outline: none;
    }
    /* Responsive */
    @media (max-width: 600px) {
      #widget-content {
        margin: 8px;
        padding: 12px;
      }
      #tab-bar {
        margin: 8px;
      }
    }
  </style>
</head>
<body>
  <div id="tab-bar">
    <button class="tab active" data-tab="todo">üìù To-Do</button>
    <button class="tab" data-tab="timer">‚è≤Ô∏è Timer</button>
    <button class="tab" data-tab="music">üéµ Music</button>
    <button class="tab" data-tab="ai">ü§ñ AI Chat</button>
    <button class="tab" data-tab="settings">‚öôÔ∏è Settings</button>
  </div>
  <div id="widget-content">
    <!-- Content will be injected here -->
  </div>
  <script>
    // Tab switching logic
    const tabs = document.querySelectorAll('.tab');
    const widgetContent = document.getElementById('widget-content');
    let currentTab = 'todo';

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        tabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        currentTab = tab.dataset.tab;
        renderTab(currentTab);
      });
    });

    // To-Do List
    let todos = [];

    function renderTodo() {
      widgetContent.innerHTML = `
        <h2>To-Do List</h2>
        <input class="bubble-input" id="todo-input" placeholder="Type and press Enter to add..." />
        <ul class="todo-list" id="todo-list"></ul>
      `;
      const input = document.getElementById('todo-input');
      const list = document.getElementById('todo-list');
      input.addEventListener('keydown', e => {
        if (e.key === 'Enter' && input.value.trim()) {
          todos.push({ text: input.value.trim(), done: false });
          input.value = '';
          renderTodo();
        }
      });
      todos.forEach((todo, idx) => {
        const li = document.createElement('li');
        li.className = 'todo-item';
        li.innerHTML = `
          <input type="checkbox" class="todo-checkbox" ${todo.done ? 'checked' : ''} />
          <span style="flex:1;${todo.done ? 'text-decoration:line-through;' : ''}">${todo.text}</span>
          <button style="background:none;border:none;color:var(--main-color);font-size:1.2em;cursor:pointer;" title="Delete">&times;</button>
        `;
        li.querySelector('.todo-checkbox').addEventListener('change', () => {
          todos[idx].done = !todos[idx].done;
          renderTodo();
        });
        li.querySelector('button').addEventListener('click', () => {
          todos.splice(idx, 1);
          renderTodo();
        });
        list.appendChild(li);
      });
    }

    // Timer
    let timerInterval = null;
    let timerSeconds = 0;

    function renderTimer() {
      widgetContent.innerHTML = `
        <h2>Timer</h2>
        <div class="timer-display" id="timer-display">00:00</div>
        <input class="bubble-input" id="timer-input" type="number" min="1" placeholder="Minutes..." />
        <button class="bubble-input" id="timer-start">Start</button>
        <button class="bubble-input" id="timer-reset">Reset</button>
      `;
      const display = document.getElementById('timer-display');
      const input = document.getElementById('timer-input');
      document.getElementById('timer-start').onclick = () => {
        timerSeconds = parseInt(input.value) * 60 || 0;
        if (timerSeconds > 0) {
          clearInterval(timerInterval);
          timerInterval = setInterval(() => {
            if (timerSeconds > 0) {
              timerSeconds--;
              display.textContent = formatTime(timerSeconds);
            } else {
              clearInterval(timerInterval);
              display.textContent = "Time's up!";
            }
          }, 1000);
        }
      };
      document.getElementById('timer-reset').onclick = () => {
        clearInterval(timerInterval);
        timerSeconds = 0;
        display.textContent = "00:00";
      };
    }
    function formatTime(sec) {
      const m = Math.floor(sec / 60).toString().padStart(2, '0');
      const s = (sec % 60).toString().padStart(2, '0');
      return `${m}:${s}`;
    }

    // Music Player (SoundCloud Embed)
    function renderMusic() {
      widgetContent.innerHTML = `
        <h2>Music Player</h2>
        <div class="music-player">
          <input class="bubble-input" id="sc-url" placeholder="Paste SoundCloud playlist URL..." />
          <button class="bubble-input" id="sc-embed">Embed</button>
          <div class="soundcloud-embed" id="sc-player"></div>
        </div>
      `;
      document.getElementById('sc-embed').onclick = () => {
        const url = document.getElementById('sc-url').value.trim();
        if (url) {
          // SoundCloud embed code
          document.getElementById('sc-player').innerHTML = `
            <iframe width="100%" height="166" scrolling="no" frameborder="no"
              allow="autoplay"
              src="https://w.soundcloud.com/player/?url=${encodeURIComponent(url)}&color=%23AD1A72">
            </iframe>
          `;
        }
      };
    }

    // AI Chat Placeholder
    function renderAI() {
      widgetContent.innerHTML = `
        <h2>ü§ñ AI Chat</h2>
        <div style="display:flex;align-items:center;gap:12px;">
          <span style="font-size:2em;">ü§ñ</span>
          <input class="bubble-input" id="ai-input" placeholder="Type your message..." />
        </div>
        <div id="ai-chat-log" style="margin-top:18px;"></div>
      `;
      const input = document.getElementById('ai-input');
      const log = document.getElementById('ai-chat-log');
      input.addEventListener('keydown', e => {
        if (e.key === 'Enter' && input.value.trim()) {
          const msg = document.createElement('div');
          msg.textContent = "You: " + input.value;
          log.appendChild(msg);
          input.value = '';
          // Placeholder: Add API call here for real AI response
          setTimeout(() => {
            const aiMsg = document.createElement('div');
            aiMsg.textContent = "ü§ñ: (AI response here)";
            log.appendChild(aiMsg);
          }, 700);
        }
      });
    }

    // Settings
    function renderSettings() {
      widgetContent.innerHTML = `
        <h2>Settings</h2>
        <div class="settings-group">
          <label class="settings-label">Main Color:</label>
          <input type="color" class="color-input" id="main-color-picker" value="#AD1A72" />
        </div>
        <div class="settings-group">
          <label class="settings-label">Background Color:</label>
          <input type="color" class="color-input" id="bg-color-picker" value="#ffffff" />
        </div>
      `;
      document.getElementById('main-color-picker').oninput = e => {
        document.documentElement.style.setProperty('--main-color', e.target.value);
      };
      document.getElementById('bg-color-picker').oninput = e => {
        document.documentElement.style.setProperty('--bg-color', e.target.value);
      };
    }

    // Tab rendering
    function renderTab(tab) {
      if (tab === 'todo') renderTodo();
      else if (tab === 'timer') renderTimer();
      else if (tab === 'music') renderMusic();
      else if (tab === 'ai') renderAI();
      else if (tab === 'settings') renderSettings();
    }
    renderTab(currentTab);
  </script>
</body>
</html>
